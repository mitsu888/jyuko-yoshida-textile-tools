/**
 * 糸データベース
 * 50種類以上の実用糸（混紡糸含む）を定義
 * 各糸には番手、素材、特性、生産上の注意点を含む
 */

// 素材カテゴリ
export const FIBER_CATEGORIES = {
  COTTON: { id: 'cotton', name: '綿', nameEn: 'Cotton' },
  LINEN: { id: 'linen', name: '麻', nameEn: 'Linen' },
  WOOL: { id: 'wool', name: '羊毛', nameEn: 'Wool' },
  SILK: { id: 'silk', name: '絹', nameEn: 'Silk' },
  SYNTHETIC: { id: 'synthetic', name: '合成繊維', nameEn: 'Synthetic' },
  REGENERATED: { id: 'regenerated', name: '再生繊維', nameEn: 'Regenerated' },
  BLEND: { id: 'blend', name: '混紡', nameEn: 'Blend' },
  SPECIALTY: { id: 'specialty', name: '特殊繊維', nameEn: 'Specialty' },
};

// 番手換算ヘルパー
export function neToTex(ne) {
  return 590.5 / ne;
}

export function texToNe(tex) {
  return 590.5 / tex;
}

export function neToNm(ne) {
  return ne * 1.693;
}

export function nmToNe(nm) {
  return nm / 1.693;
}

// 糸データベース
export const YARN_DATABASE = [
  // ============ 綿糸 ============
  {
    id: 'cotton_carded_20',
    name: 'カード綿糸 20番手',
    nameEn: 'Carded Cotton 20Ne',
    category: 'cotton',
    composition: [{ fiber: 'cotton', percentage: 100 }],
    count: { ne: 20, tex: 29.5 },
    countRange: { min: 16, max: 24 },
    characteristics: {
      strength: 3,
      softness: 3,
      luster: 2,
      elasticity: 2,
      absorbency: 5,
      durability: 4,
    },
    colors: ['raw', 'bleached', 'dyed'],
    typicalColors: ['#F5F5DC', '#FFFFFF', '#1B1B1B', '#8B4513'],
    applications: ['デニム', 'ワークウェア', 'カジュアルシャツ'],
    productionNotes: ['標準的な綿糸', '染色性良好'],
    risks: [],
    priceLevel: 2,
  },
  {
    id: 'cotton_carded_30',
    name: 'カード綿糸 30番手',
    nameEn: 'Carded Cotton 30Ne',
    category: 'cotton',
    composition: [{ fiber: 'cotton', percentage: 100 }],
    count: { ne: 30, tex: 19.7 },
    countRange: { min: 26, max: 34 },
    characteristics: {
      strength: 3,
      softness: 3,
      luster: 2,
      elasticity: 2,
      absorbency: 5,
      durability: 4,
    },
    colors: ['raw', 'bleached', 'dyed'],
    typicalColors: ['#F5F5DC', '#FFFFFF'],
    applications: ['シャツ', 'ブラウス', 'カジュアルウェア'],
    productionNotes: ['汎用性の高い番手'],
    risks: [],
    priceLevel: 2,
  },
  {
    id: 'cotton_carded_40',
    name: 'カード綿糸 40番手',
    nameEn: 'Carded Cotton 40Ne',
    category: 'cotton',
    composition: [{ fiber: 'cotton', percentage: 100 }],
    count: { ne: 40, tex: 14.8 },
    countRange: { min: 36, max: 44 },
    characteristics: {
      strength: 3,
      softness: 4,
      luster: 2,
      elasticity: 2,
      absorbency: 5,
      durability: 3,
    },
    colors: ['raw', 'bleached', 'dyed'],
    typicalColors: ['#FFFFFF', '#F0F0F0'],
    applications: ['ドレスシャツ', 'ブラウス', '薄地'],
    productionNotes: ['細番手のため糸切れに注意'],
    risks: ['高速織機で糸切れリスク'],
    priceLevel: 3,
  },
  {
    id: 'cotton_combed_40',
    name: 'コーマ綿糸 40番手',
    nameEn: 'Combed Cotton 40Ne',
    category: 'cotton',
    composition: [{ fiber: 'cotton', percentage: 100 }],
    count: { ne: 40, tex: 14.8 },
    countRange: { min: 36, max: 44 },
    characteristics: {
      strength: 4,
      softness: 5,
      luster: 4,
      elasticity: 2,
      absorbency: 5,
      durability: 4,
    },
    colors: ['raw', 'bleached', 'dyed'],
    typicalColors: ['#FFFFFF', '#FFFEF0'],
    applications: ['高級シャツ', 'ドレス', '肌着'],
    productionNotes: ['短繊維除去で毛羽立ち少', '光沢あり'],
    risks: [],
    priceLevel: 4,
  },
  {
    id: 'cotton_combed_60',
    name: 'コーマ綿糸 60番手',
    nameEn: 'Combed Cotton 60Ne',
    category: 'cotton',
    composition: [{ fiber: 'cotton', percentage: 100 }],
    count: { ne: 60, tex: 9.8 },
    countRange: { min: 55, max: 65 },
    characteristics: {
      strength: 3,
      softness: 5,
      luster: 4,
      elasticity: 2,
      absorbency: 5,
      durability: 3,
    },
    colors: ['raw', 'bleached', 'dyed'],
    typicalColors: ['#FFFFFF'],
    applications: ['高級ドレスシャツ', 'ブロード', 'ボイル'],
    productionNotes: ['細番手で繊細', '高品質な原綿必要'],
    risks: ['織機速度制限', '糸切れ注意'],
    priceLevel: 5,
  },
  {
    id: 'cotton_combed_80',
    name: 'コーマ綿糸 80番手',
    nameEn: 'Combed Cotton 80Ne',
    category: 'cotton',
    composition: [{ fiber: 'cotton', percentage: 100 }],
    count: { ne: 80, tex: 7.4 },
    countRange: { min: 75, max: 85 },
    characteristics: {
      strength: 3,
      softness: 5,
      luster: 5,
      elasticity: 2,
      absorbency: 5,
      durability: 3,
    },
    colors: ['raw', 'bleached', 'dyed'],
    typicalColors: ['#FFFFFF', '#FFF8DC'],
    applications: ['最高級シャツ', 'ハンカチ', '高級裏地'],
    productionNotes: ['超長綿必須', '高度な紡績技術'],
    risks: ['糸切れ頻発リスク', '低速織機推奨'],
    priceLevel: 6,
  },
  {
    id: 'cotton_combed_100',
    name: 'コーマ綿糸 100番手',
    nameEn: 'Combed Cotton 100Ne',
    category: 'cotton',
    composition: [{ fiber: 'cotton', percentage: 100 }],
    count: { ne: 100, tex: 5.9 },
    countRange: { min: 95, max: 105 },
    characteristics: {
      strength: 2,
      softness: 5,
      luster: 5,
      elasticity: 2,
      absorbency: 5,
      durability: 2,
    },
    colors: ['raw', 'bleached', 'dyed'],
    typicalColors: ['#FFFFFF'],
    applications: ['極薄地シャツ', '高級ハンカチ'],
    productionNotes: ['最高級超長綿のみ', '専門設備必要'],
    risks: ['生産性低下', '不良率上昇'],
    priceLevel: 7,
  },
  {
    id: 'cotton_mercerized_60',
    name: 'マーセライズ綿 60番手',
    nameEn: 'Mercerized Cotton 60Ne',
    category: 'cotton',
    composition: [{ fiber: 'cotton', percentage: 100 }],
    count: { ne: 60, tex: 9.8 },
    countRange: { min: 55, max: 65 },
    characteristics: {
      strength: 5,
      softness: 5,
      luster: 5,
      elasticity: 3,
      absorbency: 4,
      durability: 5,
    },
    colors: ['bleached', 'dyed'],
    typicalColors: ['#FFFFFF', '#000000'],
    applications: ['高級シャツ', 'ニット', '刺繍糸'],
    productionNotes: ['シルケット加工済み', '光沢・強度向上'],
    risks: [],
    priceLevel: 5,
  },
  {
    id: 'cotton_gassed',
    name: 'ガス焼き綿糸 50番手',
    nameEn: 'Gassed Cotton 50Ne',
    category: 'cotton',
    composition: [{ fiber: 'cotton', percentage: 100 }],
    count: { ne: 50, tex: 11.8 },
    countRange: { min: 45, max: 55 },
    characteristics: {
      strength: 4,
      softness: 4,
      luster: 5,
      elasticity: 2,
      absorbency: 4,
      durability: 4,
    },
    colors: ['bleached', 'dyed'],
    typicalColors: ['#FFFFFF', '#FFF8DC'],
    applications: ['高級織物', 'レース', '縫い糸'],
    productionNotes: ['毛羽焼き加工済み', '滑らかな表面'],
    risks: [],
    priceLevel: 5,
  },
  {
    id: 'cotton_organic_30',
    name: 'オーガニックコットン 30番手',
    nameEn: 'Organic Cotton 30Ne',
    category: 'cotton',
    composition: [{ fiber: 'cotton', percentage: 100, organic: true }],
    count: { ne: 30, tex: 19.7 },
    countRange: { min: 26, max: 34 },
    characteristics: {
      strength: 3,
      softness: 4,
      luster: 2,
      elasticity: 2,
      absorbency: 5,
      durability: 4,
    },
    colors: ['natural', 'bleached', 'dyed'],
    typicalColors: ['#F5DEB3', '#FFFFF0'],
    applications: ['ベビー服', 'エコ衣料', '肌着'],
    productionNotes: ['認証必要', '無農薬栽培'],
    risks: ['ロット差が出やすい'],
    priceLevel: 5,
    certifications: ['GOTS', 'OCS'],
  },

  // ============ 麻糸 ============
  {
    id: 'linen_wet_spun_40',
    name: 'リネン湿式紡績 40番手',
    nameEn: 'Wet Spun Linen 40Lea',
    category: 'linen',
    composition: [{ fiber: 'linen', percentage: 100 }],
    count: { ne: 24, tex: 24.6, lea: 40 },
    countRange: { min: 35, max: 45 },
    characteristics: {
      strength: 5,
      softness: 2,
      luster: 4,
      elasticity: 1,
      absorbency: 5,
      durability: 5,
    },
    colors: ['natural', 'bleached', 'dyed'],
    typicalColors: ['#D2B48C', '#F5F5DC', '#FFFFFF'],
    applications: ['高級シャツ', 'テーブルリネン', '夏物'],
    productionNotes: ['湿式紡績で滑らか', '乾燥に注意'],
    risks: ['乾燥で糸切れ', '静電気注意'],
    priceLevel: 6,
  },
  {
    id: 'linen_dry_spun_20',
    name: 'リネン乾式紡績 20番手',
    nameEn: 'Dry Spun Linen 20Lea',
    category: 'linen',
    composition: [{ fiber: 'linen', percentage: 100 }],
    count: { ne: 12, tex: 49.2, lea: 20 },
    countRange: { min: 16, max: 24 },
    characteristics: {
      strength: 5,
      softness: 1,
      luster: 3,
      elasticity: 1,
      absorbency: 5,
      durability: 5,
    },
    colors: ['natural', 'bleached', 'dyed'],
    typicalColors: ['#C4A77D', '#DED6C8'],
    applications: ['キャンバス', 'バッグ', 'インテリア'],
    productionNotes: ['ネップ感あり', '自然な風合い'],
    risks: ['ネップムラ'],
    priceLevel: 4,
  },
  {
    id: 'ramie_40',
    name: 'ラミー（苧麻）40番手',
    nameEn: 'Ramie 40Ne',
    category: 'linen',
    composition: [{ fiber: 'ramie', percentage: 100 }],
    count: { ne: 40, tex: 14.8 },
    countRange: { min: 36, max: 44 },
    characteristics: {
      strength: 5,
      softness: 2,
      luster: 5,
      elasticity: 1,
      absorbency: 5,
      durability: 5,
    },
    colors: ['natural', 'bleached', 'dyed'],
    typicalColors: ['#FFFFF0', '#FFFFFF'],
    applications: ['夏物衣料', '和装', 'テーブルウェア'],
    productionNotes: ['シルクのような光沢', '硬めの風合い'],
    risks: ['シワになりやすい'],
    priceLevel: 5,
  },
  {
    id: 'hemp_16',
    name: 'ヘンプ（大麻）16番手',
    nameEn: 'Hemp 16Ne',
    category: 'linen',
    composition: [{ fiber: 'hemp', percentage: 100 }],
    count: { ne: 16, tex: 36.9 },
    countRange: { min: 12, max: 20 },
    characteristics: {
      strength: 5,
      softness: 2,
      luster: 2,
      elasticity: 1,
      absorbency: 5,
      durability: 5,
    },
    colors: ['natural', 'bleached', 'dyed'],
    typicalColors: ['#8B7355', '#C4B79D'],
    applications: ['カジュアルウェア', 'バッグ', 'エコ製品'],
    productionNotes: ['環境負荷低', '丈夫'],
    risks: ['硬さあり'],
    priceLevel: 4,
    certifications: ['GOTS対応可'],
  },

  // ============ 毛糸 ============
  {
    id: 'wool_merino_60',
    name: 'メリノウール 60番手',
    nameEn: 'Merino Wool 60Nm',
    category: 'wool',
    composition: [{ fiber: 'merino_wool', percentage: 100 }],
    count: { nm: 60, ne: 35.4, tex: 16.7 },
    countRange: { min: 55, max: 65 },
    characteristics: {
      strength: 3,
      softness: 5,
      luster: 4,
      elasticity: 5,
      absorbency: 4,
      durability: 3,
    },
    colors: ['natural', 'bleached', 'dyed'],
    typicalColors: ['#FFFAF0', '#F5F5DC'],
    applications: ['高級スーツ', 'ドレス', 'ニット'],
    productionNotes: ['細繊度19μm以下', '柔らかい風合い'],
    risks: ['虫害注意', 'ピリング'],
    priceLevel: 6,
    micron: 19,
  },
  {
    id: 'wool_merino_80',
    name: 'スーパーファインメリノ 80番手',
    nameEn: 'Super Fine Merino 80Nm',
    category: 'wool',
    composition: [{ fiber: 'merino_wool', percentage: 100 }],
    count: { nm: 80, ne: 47.3, tex: 12.5 },
    countRange: { min: 75, max: 85 },
    characteristics: {
      strength: 2,
      softness: 5,
      luster: 5,
      elasticity: 5,
      absorbency: 4,
      durability: 3,
    },
    colors: ['natural', 'bleached', 'dyed'],
    typicalColors: ['#FFFAF0'],
    applications: ['最高級スーツ', 'コート'],
    productionNotes: ['繊度16μm以下', 'Super 120s相当'],
    risks: ['繊細で取扱注意'],
    priceLevel: 7,
    micron: 16,
  },
  {
    id: 'wool_worsted_48',
    name: '梳毛糸 48番手',
    nameEn: 'Worsted Wool 48Nm',
    category: 'wool',
    composition: [{ fiber: 'wool', percentage: 100 }],
    count: { nm: 48, ne: 28.4, tex: 20.8 },
    countRange: { min: 44, max: 52 },
    characteristics: {
      strength: 4,
      softness: 4,
      luster: 4,
      elasticity: 4,
      absorbency: 4,
      durability: 4,
    },
    colors: ['natural', 'dyed'],
    typicalColors: ['#2F4F4F', '#191970', '#8B4513'],
    applications: ['ビジネススーツ', 'スラックス', 'スカート'],
    productionNotes: ['コーミング済み', '滑らかな表面'],
    risks: [],
    priceLevel: 5,
  },
  {
    id: 'wool_woolen_24',
    name: '紡毛糸 24番手',
    nameEn: 'Woolen Yarn 24Nm',
    category: 'wool',
    composition: [{ fiber: 'wool', percentage: 100 }],
    count: { nm: 24, ne: 14.2, tex: 41.6 },
    countRange: { min: 20, max: 28 },
    characteristics: {
      strength: 3,
      softness: 5,
      luster: 2,
      elasticity: 5,
      absorbency: 5,
      durability: 3,
    },
    colors: ['natural', 'dyed'],
    typicalColors: ['#F5F5DC', '#D2691E', '#808080'],
    applications: ['ツイード', 'コート', 'ブランケット'],
    productionNotes: ['膨らみのある風合い', '保温性高'],
    risks: ['ピリング', '収縮'],
    priceLevel: 4,
  },
  {
    id: 'cashmere_60',
    name: 'カシミヤ 60番手',
    nameEn: 'Cashmere 60Nm',
    category: 'wool',
    composition: [{ fiber: 'cashmere', percentage: 100 }],
    count: { nm: 60, ne: 35.4, tex: 16.7 },
    countRange: { min: 55, max: 65 },
    characteristics: {
      strength: 2,
      softness: 5,
      luster: 5,
      elasticity: 4,
      absorbency: 4,
      durability: 2,
    },
    colors: ['natural', 'dyed'],
    typicalColors: ['#D2B48C', '#F5F5DC', '#696969'],
    applications: ['高級コート', 'ストール', 'カーディガン'],
    productionNotes: ['繊度14-16μm', '希少原料'],
    risks: ['ピリング頻発', '虫害注意'],
    priceLevel: 8,
    micron: 15,
  },
  {
    id: 'mohair_48',
    name: 'モヘア 48番手',
    nameEn: 'Mohair 48Nm',
    category: 'wool',
    composition: [{ fiber: 'mohair', percentage: 100 }],
    count: { nm: 48, ne: 28.4, tex: 20.8 },
    countRange: { min: 44, max: 52 },
    characteristics: {
      strength: 4,
      softness: 4,
      luster: 5,
      elasticity: 4,
      absorbency: 4,
      durability: 4,
    },
    colors: ['natural', 'dyed'],
    typicalColors: ['#FFFFF0', '#F0E68C'],
    applications: ['サマースーツ', 'ニット', '編み物'],
    productionNotes: ['キッドモヘア（子山羊）が最高級', '光沢あり'],
    risks: ['静電気'],
    priceLevel: 6,
  },
  {
    id: 'alpaca_36',
    name: 'アルパカ 36番手',
    nameEn: 'Alpaca 36Nm',
    category: 'wool',
    composition: [{ fiber: 'alpaca', percentage: 100 }],
    count: { nm: 36, ne: 21.3, tex: 27.7 },
    countRange: { min: 32, max: 40 },
    characteristics: {
      strength: 4,
      softness: 5,
      luster: 5,
      elasticity: 3,
      absorbency: 3,
      durability: 5,
    },
    colors: ['natural', 'dyed'],
    typicalColors: ['#F5F5DC', '#8B4513', '#2F2F2F', '#FFFFFF'],
    applications: ['コート', 'マフラー', 'ニット'],
    productionNotes: ['22色の自然色', '軽くて暖かい'],
    risks: ['ピリングなし'],
    priceLevel: 6,
  },

  // ============ 絹糸 ============
  {
    id: 'silk_filament_21d',
    name: '生糸 21デニール 6本撚り',
    nameEn: 'Raw Silk 21D 6-ply',
    category: 'silk',
    composition: [{ fiber: 'silk', percentage: 100 }],
    count: { denier: 126, tex: 14, ne: 42 },
    countRange: { min: 100, max: 150 },
    characteristics: {
      strength: 5,
      softness: 5,
      luster: 5,
      elasticity: 4,
      absorbency: 4,
      durability: 4,
    },
    colors: ['natural', 'degummed', 'dyed'],
    typicalColors: ['#FFFFF0', '#FFF8DC'],
    applications: ['和装', 'スカーフ', 'ネクタイ'],
    productionNotes: ['繭からの連続繊維', '高光沢'],
    risks: ['紫外線劣化', '虫害'],
    priceLevel: 7,
  },
  {
    id: 'silk_spun_60',
    name: '絹紡糸 60番手',
    nameEn: 'Spun Silk 60Nm',
    category: 'silk',
    composition: [{ fiber: 'silk', percentage: 100 }],
    count: { nm: 60, ne: 35.4, tex: 16.7 },
    countRange: { min: 55, max: 65 },
    characteristics: {
      strength: 3,
      softness: 5,
      luster: 4,
      elasticity: 3,
      absorbency: 4,
      durability: 3,
    },
    colors: ['natural', 'dyed'],
    typicalColors: ['#FFFFF0', '#F5F5DC'],
    applications: ['ニット', 'インナー', 'ブラウス'],
    productionNotes: ['短繊維から紡績', '柔らかい風合い'],
    risks: ['ピリング'],
    priceLevel: 6,
  },
  {
    id: 'silk_tussah_40',
    name: 'タッサーシルク 40番手',
    nameEn: 'Tussah Silk 40Nm',
    category: 'silk',
    composition: [{ fiber: 'tussah_silk', percentage: 100 }],
    count: { nm: 40, ne: 23.6, tex: 25 },
    countRange: { min: 36, max: 44 },
    characteristics: {
      strength: 4,
      softness: 4,
      luster: 3,
      elasticity: 3,
      absorbency: 4,
      durability: 4,
    },
    colors: ['natural', 'dyed'],
    typicalColors: ['#D2B48C', '#C4A77D'],
    applications: ['インテリア', 'カジュアルウェア', 'アクセサリー'],
    productionNotes: ['野蚕糸', '自然な色味'],
    risks: [],
    priceLevel: 5,
  },

  // ============ 合成繊維 ============
  {
    id: 'polyester_75d',
    name: 'ポリエステルフィラメント 75デニール',
    nameEn: 'Polyester Filament 75D',
    category: 'synthetic',
    composition: [{ fiber: 'polyester', percentage: 100 }],
    count: { denier: 75, tex: 8.3, ne: 71 },
    countRange: { min: 50, max: 100 },
    characteristics: {
      strength: 5,
      softness: 3,
      luster: 4,
      elasticity: 4,
      absorbency: 1,
      durability: 5,
    },
    colors: ['dyed', 'solution_dyed'],
    typicalColors: ['#FFFFFF', '#000000'],
    applications: ['裏地', 'スポーツウェア', 'ユニフォーム'],
    productionNotes: ['安定した品質', '速乾性'],
    risks: ['静電気', '熱に注意'],
    priceLevel: 2,
  },
  {
    id: 'polyester_spun_30',
    name: 'ポリエステルスパン 30番手',
    nameEn: 'Polyester Spun 30Ne',
    category: 'synthetic',
    composition: [{ fiber: 'polyester', percentage: 100 }],
    count: { ne: 30, tex: 19.7 },
    countRange: { min: 26, max: 34 },
    characteristics: {
      strength: 5,
      softness: 3,
      luster: 3,
      elasticity: 3,
      absorbency: 1,
      durability: 5,
    },
    colors: ['dyed'],
    typicalColors: ['#FFFFFF', '#808080', '#000000'],
    applications: ['ブレンド用', 'カジュアルウェア'],
    productionNotes: ['コットン調風合い', '安価'],
    risks: ['静電気', 'ピリング'],
    priceLevel: 1,
  },
  {
    id: 'nylon_70d',
    name: 'ナイロンフィラメント 70デニール',
    nameEn: 'Nylon Filament 70D',
    category: 'synthetic',
    composition: [{ fiber: 'nylon', percentage: 100 }],
    count: { denier: 70, tex: 7.8, ne: 76 },
    countRange: { min: 40, max: 100 },
    characteristics: {
      strength: 5,
      softness: 4,
      luster: 4,
      elasticity: 5,
      absorbency: 2,
      durability: 5,
    },
    colors: ['dyed', 'solution_dyed'],
    typicalColors: ['#FFFFFF', '#000000'],
    applications: ['スポーツウェア', 'アウトドア', 'ストッキング'],
    productionNotes: ['高強度', '軽量'],
    risks: ['紫外線劣化', '熱収縮'],
    priceLevel: 3,
  },
  {
    id: 'acrylic_32',
    name: 'アクリル 32番手',
    nameEn: 'Acrylic 32Nm',
    category: 'synthetic',
    composition: [{ fiber: 'acrylic', percentage: 100 }],
    count: { nm: 32, ne: 18.9, tex: 31.3 },
    countRange: { min: 28, max: 36 },
    characteristics: {
      strength: 3,
      softness: 4,
      luster: 3,
      elasticity: 3,
      absorbency: 1,
      durability: 4,
    },
    colors: ['dyed'],
    typicalColors: ['#FF0000', '#0000FF', '#FFFF00'],
    applications: ['ニット', 'セーター', '毛布'],
    productionNotes: ['ウール調', '発色良好'],
    risks: ['静電気', 'ピリング'],
    priceLevel: 2,
  },
  {
    id: 'spandex_40d',
    name: 'スパンデックス 40デニール',
    nameEn: 'Spandex 40D',
    category: 'synthetic',
    composition: [{ fiber: 'spandex', percentage: 100 }],
    count: { denier: 40, tex: 4.4, ne: 134 },
    countRange: { min: 20, max: 70 },
    characteristics: {
      strength: 3,
      softness: 4,
      luster: 2,
      elasticity: 5,
      absorbency: 1,
      durability: 3,
    },
    colors: ['natural', 'dyed'],
    typicalColors: ['#FFFFFF', '#000000'],
    applications: ['ストレッチ素材', 'スポーツウェア', 'インナー'],
    productionNotes: ['通常は他繊維と混用', '伸縮性付与'],
    risks: ['塩素劣化', '熱劣化'],
    priceLevel: 4,
    usualBlendRatio: { min: 2, max: 10 },
  },

  // ============ 再生繊維 ============
  {
    id: 'viscose_rayon_40',
    name: 'ビスコースレーヨン 40番手',
    nameEn: 'Viscose Rayon 40Ne',
    category: 'regenerated',
    composition: [{ fiber: 'viscose', percentage: 100 }],
    count: { ne: 40, tex: 14.8 },
    countRange: { min: 36, max: 44 },
    characteristics: {
      strength: 2,
      softness: 5,
      luster: 5,
      elasticity: 2,
      absorbency: 5,
      durability: 2,
    },
    colors: ['dyed'],
    typicalColors: ['#FFFFFF', '#000000', '#FF0000'],
    applications: ['ドレス', 'ブラウス', '裏地'],
    productionNotes: ['シルク調光沢', 'ドレープ性良好'],
    risks: ['湿潤時強度低下', '収縮'],
    priceLevel: 3,
  },
  {
    id: 'modal_50',
    name: 'モダール 50番手',
    nameEn: 'Modal 50Ne',
    category: 'regenerated',
    composition: [{ fiber: 'modal', percentage: 100 }],
    count: { ne: 50, tex: 11.8 },
    countRange: { min: 45, max: 55 },
    characteristics: {
      strength: 3,
      softness: 5,
      luster: 4,
      elasticity: 3,
      absorbency: 5,
      durability: 4,
    },
    colors: ['dyed'],
    typicalColors: ['#FFFFFF', '#F5F5DC'],
    applications: ['インナー', 'Tシャツ', '寝具'],
    productionNotes: ['ブナ材由来', '柔らかく丈夫'],
    risks: [],
    priceLevel: 4,
    certifications: ['FSC対応可'],
  },
  {
    id: 'tencel_lyocell_40',
    name: 'テンセル/リヨセル 40番手',
    nameEn: 'Tencel/Lyocell 40Ne',
    category: 'regenerated',
    composition: [{ fiber: 'lyocell', percentage: 100 }],
    count: { ne: 40, tex: 14.8 },
    countRange: { min: 36, max: 44 },
    characteristics: {
      strength: 4,
      softness: 5,
      luster: 4,
      elasticity: 2,
      absorbency: 5,
      durability: 4,
    },
    colors: ['dyed'],
    typicalColors: ['#FFFFFF', '#87CEEB'],
    applications: ['デニム', 'シャツ', 'カジュアルウェア'],
    productionNotes: ['環境配慮型', 'ユーカリ由来'],
    risks: ['フィブリル化'],
    priceLevel: 5,
    certifications: ['FSC', 'OEKO-TEX'],
  },
  {
    id: 'cupro_60',
    name: 'キュプラ 60番手',
    nameEn: 'Cupro 60Ne',
    category: 'regenerated',
    composition: [{ fiber: 'cupro', percentage: 100 }],
    count: { ne: 60, tex: 9.8 },
    countRange: { min: 55, max: 65 },
    characteristics: {
      strength: 3,
      softness: 5,
      luster: 5,
      elasticity: 3,
      absorbency: 5,
      durability: 3,
    },
    colors: ['dyed'],
    typicalColors: ['#000000', '#191970', '#8B0000'],
    applications: ['高級裏地', 'ドレス', 'ブラウス'],
    productionNotes: ['コットンリンター由来', 'シルク調'],
    risks: ['摩擦に弱い'],
    priceLevel: 5,
  },

  // ============ 混紡糸 ============
  {
    id: 'blend_cotton_poly_65_35_30',
    name: 'TC 65/35 30番手',
    nameEn: 'Cotton/Poly 65/35 30Ne',
    category: 'blend',
    composition: [
      { fiber: 'cotton', percentage: 65 },
      { fiber: 'polyester', percentage: 35 },
    ],
    count: { ne: 30, tex: 19.7 },
    countRange: { min: 26, max: 34 },
    characteristics: {
      strength: 4,
      softness: 4,
      luster: 3,
      elasticity: 3,
      absorbency: 4,
      durability: 5,
    },
    colors: ['dyed'],
    typicalColors: ['#FFFFFF', '#87CEEB', '#FFB6C1'],
    applications: ['ユニフォーム', 'シャツ', 'カジュアルウェア'],
    productionNotes: ['イージーケア', '形態安定'],
    risks: ['ピリング注意'],
    priceLevel: 3,
    blendAdvantages: ['シワになりにくい', '速乾性', '耐久性向上'],
  },
  {
    id: 'blend_poly_cotton_65_35_45',
    name: 'CVC 65/35 45番手',
    nameEn: 'Poly/Cotton 65/35 45Ne',
    category: 'blend',
    composition: [
      { fiber: 'polyester', percentage: 65 },
      { fiber: 'cotton', percentage: 35 },
    ],
    count: { ne: 45, tex: 13.1 },
    countRange: { min: 40, max: 50 },
    characteristics: {
      strength: 5,
      softness: 3,
      luster: 3,
      elasticity: 4,
      absorbency: 2,
      durability: 5,
    },
    colors: ['dyed'],
    typicalColors: ['#FFFFFF', '#000000'],
    applications: ['作業服', 'ユニフォーム', 'シーツ'],
    productionNotes: ['ポリエステルリッチ', '更に丈夫'],
    risks: ['吸湿性低め', 'ピリング'],
    priceLevel: 2,
    blendAdvantages: ['高強度', '低コスト', '速乾'],
  },
  {
    id: 'blend_cotton_linen_55_45_30',
    name: 'コットンリネン 55/45 30番手',
    nameEn: 'Cotton/Linen 55/45 30Ne',
    category: 'blend',
    composition: [
      { fiber: 'cotton', percentage: 55 },
      { fiber: 'linen', percentage: 45 },
    ],
    count: { ne: 30, tex: 19.7 },
    countRange: { min: 26, max: 34 },
    characteristics: {
      strength: 4,
      softness: 3,
      luster: 3,
      elasticity: 2,
      absorbency: 5,
      durability: 5,
    },
    colors: ['natural', 'dyed'],
    typicalColors: ['#F5F5DC', '#D2B48C', '#87CEEB'],
    applications: ['夏物シャツ', 'カジュアルウェア', 'インテリア'],
    productionNotes: ['涼感と柔らかさの両立'],
    risks: ['シワになりやすい'],
    priceLevel: 4,
    blendAdvantages: ['通気性', '吸湿速乾', '自然な風合い'],
  },
  {
    id: 'blend_wool_poly_55_45_48',
    name: 'ウールポリ 55/45 48番手',
    nameEn: 'Wool/Poly 55/45 48Nm',
    category: 'blend',
    composition: [
      { fiber: 'wool', percentage: 55 },
      { fiber: 'polyester', percentage: 45 },
    ],
    count: { nm: 48, ne: 28.4, tex: 20.8 },
    countRange: { min: 44, max: 52 },
    characteristics: {
      strength: 4,
      softness: 4,
      luster: 4,
      elasticity: 4,
      absorbency: 3,
      durability: 5,
    },
    colors: ['dyed'],
    typicalColors: ['#2F4F4F', '#191970', '#808080'],
    applications: ['ビジネススーツ', 'スラックス', 'スカート'],
    productionNotes: ['形態安定', 'コスト削減'],
    risks: ['ピリング'],
    priceLevel: 4,
    blendAdvantages: ['シワ回復性', '耐久性', '価格抑制'],
  },
  {
    id: 'blend_wool_silk_70_30_60',
    name: 'ウールシルク 70/30 60番手',
    nameEn: 'Wool/Silk 70/30 60Nm',
    category: 'blend',
    composition: [
      { fiber: 'wool', percentage: 70 },
      { fiber: 'silk', percentage: 30 },
    ],
    count: { nm: 60, ne: 35.4, tex: 16.7 },
    countRange: { min: 55, max: 65 },
    characteristics: {
      strength: 3,
      softness: 5,
      luster: 5,
      elasticity: 4,
      absorbency: 4,
      durability: 3,
    },
    colors: ['dyed'],
    typicalColors: ['#191970', '#8B0000', '#2F4F4F'],
    applications: ['高級スーツ', 'ジャケット', 'ドレス'],
    productionNotes: ['光沢と風合いの高級感'],
    risks: ['デリケート'],
    priceLevel: 7,
    blendAdvantages: ['光沢', '柔らかさ', '高級感'],
  },
  {
    id: 'blend_cotton_modal_50_50_40',
    name: 'コットンモダール 50/50 40番手',
    nameEn: 'Cotton/Modal 50/50 40Ne',
    category: 'blend',
    composition: [
      { fiber: 'cotton', percentage: 50 },
      { fiber: 'modal', percentage: 50 },
    ],
    count: { ne: 40, tex: 14.8 },
    countRange: { min: 36, max: 44 },
    characteristics: {
      strength: 4,
      softness: 5,
      luster: 4,
      elasticity: 3,
      absorbency: 5,
      durability: 4,
    },
    colors: ['dyed'],
    typicalColors: ['#FFFFFF', '#F5F5DC', '#FFB6C1'],
    applications: ['Tシャツ', 'インナー', 'パジャマ'],
    productionNotes: ['極めて柔らかい肌触り'],
    risks: [],
    priceLevel: 4,
    blendAdvantages: ['ソフトな肌触り', '吸湿性', 'ドレープ性'],
  },
  {
    id: 'blend_cotton_spandex_97_3_40',
    name: 'コットンストレッチ 97/3 40番手',
    nameEn: 'Cotton/Spandex 97/3 40Ne',
    category: 'blend',
    composition: [
      { fiber: 'cotton', percentage: 97 },
      { fiber: 'spandex', percentage: 3 },
    ],
    count: { ne: 40, tex: 14.8 },
    countRange: { min: 36, max: 44 },
    characteristics: {
      strength: 4,
      softness: 4,
      luster: 3,
      elasticity: 4,
      absorbency: 4,
      durability: 4,
    },
    colors: ['dyed'],
    typicalColors: ['#FFFFFF', '#000000', '#1E90FF'],
    applications: ['ストレッチシャツ', 'チノパン', 'デニム'],
    productionNotes: ['CSY（コアスパンヤーン）'],
    risks: ['塩素漂白不可'],
    priceLevel: 4,
    blendAdvantages: ['ストレッチ性', '形態回復', '着心地向上'],
  },
  {
    id: 'blend_lyocell_cotton_60_40_30',
    name: 'テンセルコットン 60/40 30番手',
    nameEn: 'Lyocell/Cotton 60/40 30Ne',
    category: 'blend',
    composition: [
      { fiber: 'lyocell', percentage: 60 },
      { fiber: 'cotton', percentage: 40 },
    ],
    count: { ne: 30, tex: 19.7 },
    countRange: { min: 26, max: 34 },
    characteristics: {
      strength: 4,
      softness: 5,
      luster: 4,
      elasticity: 2,
      absorbency: 5,
      durability: 4,
    },
    colors: ['dyed'],
    typicalColors: ['#1E90FF', '#F5F5DC', '#87CEEB'],
    applications: ['デニム', 'カジュアルシャツ', 'ワンピース'],
    productionNotes: ['環境配慮型ブレンド'],
    risks: [],
    priceLevel: 5,
    blendAdvantages: ['ソフトさ', 'サステナブル', 'ドレープ性'],
    certifications: ['FSC', 'OEKO-TEX'],
  },
  {
    id: 'blend_wool_cashmere_90_10_60',
    name: 'ウールカシミヤ 90/10 60番手',
    nameEn: 'Wool/Cashmere 90/10 60Nm',
    category: 'blend',
    composition: [
      { fiber: 'wool', percentage: 90 },
      { fiber: 'cashmere', percentage: 10 },
    ],
    count: { nm: 60, ne: 35.4, tex: 16.7 },
    countRange: { min: 55, max: 65 },
    characteristics: {
      strength: 3,
      softness: 5,
      luster: 5,
      elasticity: 5,
      absorbency: 4,
      durability: 3,
    },
    colors: ['dyed'],
    typicalColors: ['#2F4F4F', '#8B4513', '#696969'],
    applications: ['コート', 'ジャケット', 'ストール'],
    productionNotes: ['カシミヤの柔らかさをプラス'],
    risks: ['ピリング', '虫害'],
    priceLevel: 7,
    blendAdvantages: ['高級感', '柔らかさ', '保温性'],
  },
  {
    id: 'blend_nylon_spandex_85_15',
    name: 'ナイロンスパンデックス 85/15',
    nameEn: 'Nylon/Spandex 85/15',
    category: 'blend',
    composition: [
      { fiber: 'nylon', percentage: 85 },
      { fiber: 'spandex', percentage: 15 },
    ],
    count: { denier: 40, tex: 4.4 },
    countRange: { min: 30, max: 70 },
    characteristics: {
      strength: 5,
      softness: 4,
      luster: 3,
      elasticity: 5,
      absorbency: 1,
      durability: 5,
    },
    colors: ['dyed'],
    typicalColors: ['#000000', '#FFFFFF', '#FF69B4'],
    applications: ['水着', 'スポーツウェア', 'レギンス'],
    productionNotes: ['高ストレッチ'],
    risks: ['塩素劣化'],
    priceLevel: 4,
    blendAdvantages: ['高伸縮', '形態安定', '速乾'],
  },

  // ============ 特殊繊維 ============
  {
    id: 'bamboo_40',
    name: 'バンブーレーヨン 40番手',
    nameEn: 'Bamboo Rayon 40Ne',
    category: 'specialty',
    composition: [{ fiber: 'bamboo', percentage: 100 }],
    count: { ne: 40, tex: 14.8 },
    countRange: { min: 36, max: 44 },
    characteristics: {
      strength: 3,
      softness: 5,
      luster: 4,
      elasticity: 2,
      absorbency: 5,
      durability: 3,
    },
    colors: ['dyed'],
    typicalColors: ['#F5F5DC', '#90EE90'],
    applications: ['タオル', 'インナー', 'ベビー服'],
    productionNotes: ['抗菌性あり', '吸湿速乾'],
    risks: ['湿潤時強度低下'],
    priceLevel: 4,
    specialProperties: ['antibacterial', 'UV_protection'],
  },
  {
    id: 'coolmax',
    name: 'クールマックス',
    nameEn: 'CoolMax',
    category: 'specialty',
    composition: [{ fiber: 'polyester', percentage: 100, technology: 'CoolMax' }],
    count: { denier: 75, tex: 8.3 },
    countRange: { min: 50, max: 100 },
    characteristics: {
      strength: 5,
      softness: 3,
      luster: 3,
      elasticity: 4,
      absorbency: 2,
      durability: 5,
    },
    colors: ['dyed'],
    typicalColors: ['#FFFFFF', '#1E90FF', '#FF4500'],
    applications: ['スポーツウェア', 'アウトドア', 'アクティブウェア'],
    productionNotes: ['吸汗速乾機能', '特殊断面形状'],
    risks: [],
    priceLevel: 4,
    specialProperties: ['moisture_wicking', 'quick_dry'],
    brandName: 'CoolMax',
  },
  {
    id: 'thermolite',
    name: 'サーモライト',
    nameEn: 'Thermolite',
    category: 'specialty',
    composition: [{ fiber: 'polyester', percentage: 100, technology: 'Thermolite' }],
    count: { denier: 100, tex: 11.1 },
    countRange: { min: 75, max: 150 },
    characteristics: {
      strength: 5,
      softness: 4,
      luster: 2,
      elasticity: 3,
      absorbency: 1,
      durability: 5,
    },
    colors: ['dyed'],
    typicalColors: ['#2F4F4F', '#000000'],
    applications: ['防寒着', 'アウトドア', 'スキーウェア'],
    productionNotes: ['中空繊維', '軽量保温'],
    risks: [],
    priceLevel: 5,
    specialProperties: ['insulation', 'lightweight'],
    brandName: 'Thermolite',
  },
  {
    id: 'outlast',
    name: 'アウトラスト',
    nameEn: 'Outlast',
    category: 'specialty',
    composition: [{ fiber: 'viscose', percentage: 100, technology: 'Outlast' }],
    count: { ne: 30, tex: 19.7 },
    countRange: { min: 26, max: 34 },
    characteristics: {
      strength: 3,
      softness: 4,
      luster: 3,
      elasticity: 2,
      absorbency: 4,
      durability: 3,
    },
    colors: ['dyed'],
    typicalColors: ['#FFFFFF', '#F5F5DC'],
    applications: ['寝具', 'インナー', 'スポーツウェア'],
    productionNotes: ['相変化材料（PCM）内包', '温度調節機能'],
    risks: [],
    priceLevel: 6,
    specialProperties: ['temperature_regulation'],
    brandName: 'Outlast',
  },
];

// カテゴリ別に糸を取得
export function getYarnsByCategory(categoryId) {
  return YARN_DATABASE.filter(y => y.category === categoryId);
}

// IDで糸を取得
export function getYarnById(yarnId) {
  return YARN_DATABASE.find(y => y.id === yarnId);
}

// 番手範囲で糸を検索
export function searchYarnsByCount(minNe, maxNe) {
  return YARN_DATABASE.filter(yarn => {
    const ne = yarn.count.ne || (yarn.count.nm ? yarn.count.nm / 1.693 : null);
    if (!ne) return false;
    return ne >= minNe && ne <= maxNe;
  });
}

// 素材でフィルタリング
export function filterYarnsByFiber(fiberType) {
  return YARN_DATABASE.filter(yarn =>
    yarn.composition.some(comp => comp.fiber === fiberType)
  );
}

// 用途で糸を検索
export function searchYarnsByApplication(application) {
  return YARN_DATABASE.filter(yarn =>
    yarn.applications.some(app =>
      app.toLowerCase().includes(application.toLowerCase())
    )
  );
}

// 混紡糸の組成を文字列で取得
export function getCompositionString(yarn) {
  return yarn.composition
    .map(c => `${c.fiber} ${c.percentage}%`)
    .join(' / ');
}

// 番手変換ユーティリティ
export function convertCount(value, from, to) {
  // まずTexに変換
  let tex;
  switch (from) {
    case 'ne':
      tex = neToTex(value);
      break;
    case 'nm':
      tex = 1000 / value;
      break;
    case 'denier':
      tex = value / 9;
      break;
    case 'tex':
      tex = value;
      break;
    default:
      return null;
  }

  // Texから目的の単位に変換
  switch (to) {
    case 'ne':
      return texToNe(tex);
    case 'nm':
      return 1000 / tex;
    case 'denier':
      return tex * 9;
    case 'tex':
      return tex;
    default:
      return null;
  }
}
